jtype: Flow
version: '1'

gateway: # Configuration du point d'entrée.
  protocol: [grpc, http, websocket]
  port: [51000, 54322, 54323]

executors:
  - name: encoder # Premier exécuteur nommé "encoder".
    uses:
      jtype: CLIPEncoder # Type de l'exécuteur : CLIPEncoder.
      metas:
        py_modules:
          - clip_server.executors.clip_torch # Modules Python utilisés.

  - name: indexer # Deuxième exécuteur nommé "indexer".
    uses:
      jtype: AnnLiteIndexer # Type de l'exécuteur : AnnLiteIndexer.
      with:
        n_dim: 512 # Dimension de l'espace vectoriel.
        metric: cosine # Métrique de similarité : cosinus.
        include_metadata: true # Inclure les métadonnées.
        parameters:
          - [ 'tags', 'str' ] # Paramètres : tags (chaîne de caractères).
        columns:
          - [ 'collection', 'str' ] # Colonnes : collection (chaîne de caractères).
      metas:
        py_modules:
          - annlite.executor # Modules Python utilisés.

    workspace: './workspace' # Emplacement du workspace pour l'exécuteur "indexer".
