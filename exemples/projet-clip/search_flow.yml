jtype: Flow
version: '1'
gateway:
  protocol: [grpc, http, websocket]
  port: [51000, 54322, 54323]
executors:
  - name: encoder
    uses:
      jtype: CLIPEncoder
      metas:
        py_modules:
          - clip_server.executors.clip_torch
  - name: indexer
    uses:
      jtype: AnnLiteIndexer
      with:
        n_dim: 512
        metric: cosine
        include_metadata: true
        parameters:
          - [ 'tags', 'str' ]
        columns:
          - [ 'collection', 'str' ]
      metas:
        py_modules:
          - annlite.executor
    workspace: './workspace'
